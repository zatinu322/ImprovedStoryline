<?xml version="1.0" encoding="windows-1251" standalone="yes" ?>
<triggers>

	<!-- Инициализация карты -->
	<trigger	Name="GlobalVar"	active="1">
		<event timeout="0.1" eventid="GE_TIME_PERIOD" />
		<script>
			SetVar("globalCaravanToTuzz",0)

			SetVar("R", 0)
			SetVar("Go",0)
			SetVar("AutoSaveCount", 0)
			SetVar("KnownMap",0)
			if GAME_VERSION then SetVar("ISLVersion", GAME_VERSION) end

			TActivate("ChangeTownsBelongR2M1")

			trigger:Deactivate()
		</script>
	</trigger>

	<!-- Раскладываем случайный лут по ящикам -->
	<trigger	Name="trLeFrancePlaceSecret"	active="1">
		<event	timeout="0.1"			eventid="GE_TIME_PERIOD" />
		<script>
			local gunlist = {"hornet01","specter01","pkt01","kord01","storm01","fagot01","maxim01","vector01","vulcan01","kpvt01","rapier01","flag01","rainmetal01","elephant01","odin01","omega01","bumblebee01","hammer01","hunterSideGun","mrakSideGun","big_swingfire01","cyclops01","octopus01","hailSideGun","hurricane01","rocketLauncher","zeusSideGun","marsSideGun"}
			local len = getn(gunlist)

			for i=1,19 do
				CreateBoxWithAffixGun(CVector(getPos("SecretPlace"..i.."_loc")), gunlist[random(len)], random(0, 2))
			end

			trigger:Deactivate()
		</script>
	</trigger>

	<!-- Автосохранение -->
	<trigger Name="trAutoSave" active="0">
		<event	timeout="1"		eventid="GE_TIME_PERIOD" />
		<script>
			if GetVar("AutoSaveCount").AsInt == 0 then
				SetVar("AutoSaveCount", 1)
				AutoSave()
			end

			trigger:Deactivate()
		</script>
	</trigger>

	<!-- Смена белонгов городов после окончания войны -->
	<trigger Name="ChangeTownsBelongR2M1" active="0">
		<event eventid="GE_GAME_START" ObjName="Player1" />
		<script>
			if QuestStatus("r2m2_MoveToZeonToAlex")==Q_COMPLETED then
				local towns = {"TheDoubtful", "TheVill2", "TheVill1", "TheUnderAttaks", "TheTuzz", "TheGelvetcia"}
				local len = getn(towns)
				for i = 1,len do
					println("Setting belong 1015 to "..towns[i])
					if getObj(towns[i]) then getObj(towns[i]):SetBelong(1015) end
				end

				trigger:Deactivate()

			elseif QuestStatus("d_GetAkselBandit_Quest")==Q_COMPLETED or QuestStatus("Eretik_Quest")==Q_COMPLETED then
				println("Deactivating...")
				trigger:Deactivate()
			end
		</script>
	</trigger>

	<!-- Удаляем пожарище после битвы с Боссом -->
	<trigger Name="RemoveFireNodes" active="0">
		<event eventid="GE_GAME_START" ObjName="Player1" />
		<script>
			for fire = 1,3 do
				local FireNode = GetEntityByName("FIRE0"..fire)
				if FireNode then FireNode:Remove() end
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<!-- Машинка игрока останавливается -->
	<trigger Name="trVehSTOP" active="0">
 		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetCustomControlEnabled( true )
				vehPlayer:SetCustomLinearVelocity( 0 )
				vehPlayer:SetThrottle( 0 )
				vehPlayer:SetCustomControlEnabled( false )
			end

			trigger:Deactivate()
		</script>
	</trigger>

	<!-- Расстреляли Вэн АР у тоннеля -->
	<trigger Name="FIRSTATTACK" active="0">
		<event timeout="60" eventid="GE_TIME_PERIOD" />
		<event eventid="GE_VEHICLE_WITHOUT_HEALTH" ObjName="AfterTunnel_vehicle_0" />
		<script>
			TActivate( "RolikBegin_FIRSTATTACK" )

			trigger:Deactivate()
		</script>
	</trigger>

	<!-- Новая Сибилла -->
	<trigger Name="TheNewSibillaClose" active="0">
		<event	timeout="0.01"		eventid="GE_TIME_PERIOD" />
		<script>

			local tp = GetEntityByName("TheNewSibilla_enter")
			if tp then tp:SetProperty("Active", 0) end

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="TheNewSibillaOpen" active="0">
		<event	timeout="0.01"		eventid="GE_TIME_PERIOD" />
		<script>

			local tp = GetEntityByName("TheNewSibilla_enter")
			if tp then tp:SetProperty("Active", 1) end

			for i = 1,8 do
				local kol = GetEntityByName("koluch"..i)
				if kol then kol:Remove() end
			end

			trigger:Deactivate()
		</script>
	</trigger>

<!-- АНТИМИЛЛИТАРИСТЫ -->
	<!-- Защита каравана СНГ -->
	<trigger Name="ZashitaCaravan" active="0">
		<event	timeout="0.01"		eventid="GE_TIME_PERIOD" />
		<script>
			SetTolerance(1100, 1015, RS_ENEMY)
			SetTolerance(1100, 1016, RS_ALLY)
			SetTolerance(1016, 1015, RS_NEUTRAL)
			
			TeamCreate("CaravanTuzz",1016,CVector(2425.274, 233.000, 2887.595),{"r2m1_CaravanMolokovoz03"})
			local vehCar = GetEntityByName("CaravanTuzz_vehicle_0")
			if vehCar then
				vehCar:AttachTrailer("MolokovozTrailer")
				PaintTrailer(vehCar)
			end

			CompleteQuest("Zashita_Quest1")
			TakeQuest("Zashita_Quest2")
			
			TeamCreate("ARKillers",1015,CVector(2472.880, 225.221, 2843.691),{"r2m1_Fighter01", "TSPFighter", "Molokovoz02"})
			
			TActivate("ARKillersDIE")
			TActivate("CaravanAMDEAD")
			TActivate("CaravanSNGTolerance2sec")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="CaravanSNGTolerance2sec" active="0">
		<event	timeout="2"		eventid="GE_TIME_PERIOD" />
		<script>
			SetTolerance(1016, 1015, RS_ENEMY)

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="CaravanAMDEAD" active="0">
		<event eventid="GE_OBJECT_DIE" ObjName="CaravanTuzz_vehicle_0" />
		<event eventid="GE_OBJECT_DIE" ObjName="CaravanTuzz_vehicle_0_Trailer" />
		<script>
			local vehCar = GetEntityByName("CaravanTuzz_vehicle_0")
			local vehCarTrailer = GetEntityByName("CaravanTuzz_vehicle_0_Trailer")

			if vehCar and vehCar:IsAlive() then
				vehCar:Remove()
			end

			if vehCarTrailer and vehCarTrailer:IsAlive() then
				vehCarTrailer:Remove()
			end

			FailQuest("Zashita_Quest2")
			FailQuest("r1m3_LisaWithOberegAndDisk_Quest")
			TActivate("CaravDeadEnd1")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="ARKillersDIE" active="0">
		<event eventid="GE_OBJECT_DIE" ObjName="ARKillers" />
		<script>
			CompleteQuest("Zashita_Quest2")
			TakeQuest("preEretik_Quest")
			
		    TActivate("Zashitacin")
			TDeactivate("CaravanAMDEAD")

			trigger:Deactivate()
		</script>
	</trigger>

	<!-- Подъезжаем к Роторску перед битвой -->
	<trigger Name="prebattletr" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="Prebattle_Loc" />
		<script>
			TActivate("prebattlecin_begin")

			trigger:Deactivate()
		</script>
	</trigger>
	
	<!-- Разбили СНГ в Роторске -->
	<trigger Name="FinalBattleEnd" active="0">
		<event eventid="GE_OBJECT_DIE" ObjName="SNGLeaders" />
		<script>
			CompleteQuest("FinalBattle_Quest2")
			SetTolerance(1100,1016,RS_ALLY)
			SetTolerance(1083,1016,RS_ALLY)
	
			TActivate("OIDRolikBegin")
	
			trigger:Deactivate()
		</script>
	</trigger>

<!-- СНГ -->
	<!-- Сопровождение каравана через 2 деревни -->
	<trigger Name="trCaravanToVill1" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			local vehCar = CreateVehicleEx("r2m1_CaravanMolokovoz03","KARAVANvvt_vehicle_0", CVector(2626.940, 281.148, 1704.669), 1016, Quaternion(0.002, 0.439, -0.009, -0.898))
			if vehCar then
				vehCar:AttachTrailer("MolokovozTrailer")
				PaintTrailer(vehCar)
				vehCar:SetMaxTorque(200)
			end

			TakeQuest("d_SecondVillage_Quest")

			TActivate( "trCaravanDIE" )
			TActivate( "trCaravanToVill15sec" )
			TActivate( "trCaravanToVill1INPLACE" )
			TActivate( "trCaravanLength" )
			TDeactivate("triggerExitToMap13")

			for car = 0,1 do
				local veh = GetEntityByName("SNGArmy1"):GetVehicle(car)
				if veh then veh:Remove() end
			end

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trCaravanDIE" active="0">
		<event eventid="GE_OBJECT_DIE" ObjName="KARAVANvvt_vehicle_0" />
		<event eventid="GE_OBJECT_DIE" ObjName="KARAVANvvt_vehicle_0_Trailer" />
		<script>

			local vehCar = GetEntityByName("KARAVANvvt_vehicle_0")
			local vehCarTrailer = GetEntityByName("CKARAVANvvt_vehicle_0_Trailer")
			if vehCar and vehCar:IsAlive() then
				vehCar:Remove()
			end
			if vehCarTrailer and vehCarTrailer:IsAlive() then
				vehCarTrailer:Remove()
			end

			FailQuestIfTaken( "d_CaravanFromTuzzToVillage_Quest" )

			TActivate("triggerExitToMap13")
			TActivate("CaravDeadEnd1")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trCaravanToVill15sec" active="0">
		<event timeout="10" eventid="GE_TIME_PERIOD" />
		<script>
			GetEntityByName("KARAVANvvt_vehicle_0"):SetExternalPathByName("TtoV1_path")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trCaravanToVill25sec" active="0">
		<event timeout="3" eventid="GE_TIME_PERIOD" />
		<script>
			GetEntityByName("KARAVANvvt_vehicle_0"):SetExternalPathByName("V1toV2_path")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trCaravanToT5sec" active="0">
		<event timeout="3" eventid="GE_TIME_PERIOD" />
		<script>
			GetEntityByName("KARAVANvvt_vehicle_0"):SetExternalPathByName("V2toT_path")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trCaravanToTuzzINPLACE" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="TheVill3_Loc" />
		<script>
			SetVar("globalCaravanToTuzz",1)

			TDeactivate( "trCaravanDIE" )
			TDeactivate( "trCaravanLength" )
			TActivate( "triggerExitToMap13" )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trCaravanRemove" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			GetEntityByName("KARAVANvvt_vehicle_0"):Remove()

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trCaravanLength" active="0">
		<event timeout="2" eventid="GE_TIME_PERIOD" />
		<script>
			local run = GetEntityByName("KARAVANvvt_vehicle_0")
			local pl = GetPlayerVehicle()
			local len

			if run and run:IsAlive() then
				len = Dist(pl, run)
				if (len > 75) then
					run:SetCustomLinearVelocity( 0 )
					run:SetThrottle( 0 )
				end
			end
		</script>
	</trigger>

	<!-- Поймать генерала АР -->
	<trigger Name="TAKEBOSSAR" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			TeamCreate("SNGTeamFighters",1016,CVector(6345, 336, 1097),{"r2m1_Molokovoz01","r2m1_Belaz01"}, nil, 1)

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="TAKEBOSSARLOC" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="BossARLocation" />
		<script>
			TeamCreate("BossARCar",1015,CVector(6450, 347, 794),{"r2m1_Hunter01","r2m1_Hunter02","OL_Ural", "Molokovoz02", "AKF_Cruiser1"}, CVector(6286, 320, 1115), 1)

			TActivate ("TAKEBOSSARDEAD")
			TActivate ("RolikBegin_TAKEBOSSARLOC")

			CompleteQuest( "d_TakeGeneralOfBandits_Quest1" )

			trigger:Deactivate()
		</script>
	</trigger>

<!-- АР -->
	<!-- Создание каравана СНГ -->
	<trigger Name="Start000" active="1">
		<event eventid="GE_GAME_START" ObjName="Player1" />
		<script>
			if IsQuestTaken("r2m2_GoToR2M1") and not( IsQuestComplete("r2m2_GoToR2M1")) then
				SetTolerance( 1100, 1016, RS_ENEMY )
				SetTolerance( 1100, 1083, RS_ENEMY )

				local r1 = random(2)
				local r2 = random(1)

				local RandCoord1 = {	CVector(2830, 222, 3589),
								CVector(3644, 286, 2557)
				}
				local RandCoord2 = {	CVector(2706, 270, 1576)
				}
				
				TeamCreate("KaravanSNGTill", 1016, RandCoord1[r1], {"r2m1_scout01","r2m1_CaravanMolokovoz03","r2m1_scout02"}, RandCoord2[r2], 1)
				local vehCar = GetEntityByName("KaravanSNGTill_vehicle_1")
				if vehCar then
					vehCar:AttachTrailer("MolokovozTrailer")
					PaintTrailer(vehCar)
				end

				CompleteQuest("r2m2_GoToR2M1")

				TActivate ("KARAVANSNGDIE")

				trigger:Deactivate()
			end
		</script>
	</trigger>

<!-- Натыкаемся на Лису у Гельвеции -->
	<trigger Name="LISAMOVETOGELVFROMR2M2" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="LisaFindLocation" />
		<script>

			TActivate( "RolikBegin_Lisa" )

			trigger:Deactivate()
		</script>
	</trigger>
<!-- Победили Лису -->
	<trigger Name="LISADIED" active="0">
		<event eventid="GE_VEHICLE_WITHOUT_HEALTH" ObjName="LisaInCar_vehicle_0" />
		<script>
			TActivate("RolikBegin_LISADIED")

			AddHistory( "r2_Lisa_After_Axel_02" )
			AddHistory( "r2_With_Lisa_To_Oracul_01" )
			AddFadingMsgId( "fm_history_got" )

			trigger:Deactivate()
		</script>
	</trigger>

<!-- Босс-Кран -->
	<trigger Name="PARISTUBECREATE" active="1">
		<event timeout="1" eventid="GE_TIME_PERIOD" />
		<script>
			CreateNewDummyObject( "factory_tube1sam", "tubezagr", -1, -1, CVector(2250, 224, 5715), Quaternion(0.0342, -0.8608, 0.0583, 0.5045), 0)

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="PARISTUBEREMOVE" active="0">
		<event timeout="1" eventid="GE_TIME_PERIOD" />
		<script>
			local r = GetEntityByName ("tubezagr")
			if r then r:Remove() end

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="OPARISPARIS" active="1">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="ParisLocation" />
		<script>
			if  IsQuestTaken("d_MoveInParis_Quest") and not(IsQuestComplete("d_MoveInParis_Quest") or IsQuestFailed("d_MoveInParis_Quest"))  then

				local vehPlayer = GetPlayerVehicle()
				if vehPlayer then
					vehPlayer:SetCustomControlEnabled( true )
					vehPlayer:SetCustomLinearVelocity( 0 )
					vehPlayer:SetThrottle( 0 )
					vehPlayer:SetCustomControlEnabled( false )
				end

				TActivate("RolikBegin_OPARIS")

				TActivate("trAutoSave")

				AllowSave(false)

				trigger:Deactivate()
			end
		</script>
	</trigger>

	<trigger Name="TRIGGER_OPARISPARISBOSSDIE" active="0">
		<event eventid="GE_OBJECT_DIE" ObjName="ParisBoss" />
		<script>

			TActivate("PARISTUBEREMOVE")

			local a = GetEntityByName("ToR3M1")
			if a then a:SetProperty("Active",1) end

			trigger:Deactivate()
		</script>
	</trigger>

<!-- Уничтожили тарелку Ньери -->
	<trigger Name="TRIGGER_ALIENSDIE" active="0">
		<event eventid="GE_OBJECT_DIE" ObjName="AliensShip" />
		<script>
			TActivate( "RolikBegin_UFODIE" )

			CompleteQuest( "r2m1_DestroyAlienShip" )
			CompleteQuest( "r4m2_DestroyPlate" )

			trigger:Deactivate()
		</script>
	</trigger>

<!-- мерцающее нло -->
	<trigger Name="trGeneric" active="0">
		<event timeout="0.03" eventid="GE_TIME_PERIOD" />
		<script>
			local camPos = GetCameraPos()
			camPos.x = camPos.x + 50

			local r = GetVar("R").AsInt + 1
			if r >= 100 then trigger:Deactivate() end

			local g = r
			local ON = 490.804
			local OFF = 0
			local y = 0
			if g >= 3 then
				y = ON
				RuleConsole("g_postEffect cinematic05")
			end
			if g >= 5 then
				y = OFF
				RuleConsole("g_postEffect cinematicEnd")
			end
			if g >= 10 then
				y = ON
				RuleConsole("g_postEffect cinematic05")
			end
			if g >= 12 then
				y = OFF
				RuleConsole("g_postEffect cinematicEnd")
			end
			if g >= 20 then
				y = ON
				RuleConsole("g_postEffect cinematic01")
			end
			if g >= 23 then
				y = OFF
--				RuleConsole("g_postEffect cinematicEnd")
			end
			if g >= 26 then y = ON end
			if g >= 28 then y = OFF  end
			if g >= 30 then y = ON  end
			if g >= 33 then y = OFF  end
			if g >= 35 then y = ON  end
			if g >= 38 then y = OFF  end
			if g >= 40 then y = ON end
			if g >= 45 then
				y = OFF
				RuleConsole("g_postEffect cinematic03")
			end
			if g >= 50 then
				y = ON
				RuleConsole("g_postEffect cinematic05")
			end
			if g >= 52 then
				y = OFF
				RuleConsole("g_postEffect cinematic04")
			end
			if g >= 60 then
				y = ON
				RuleConsole("g_postEffect cinematic05")
			end
			if g >= 62 then
				y = OFF
				RuleConsole("g_postEffect cinematic02")
			end
			if g >= 66 then
				y = ON
				RuleConsole("g_postEffect cinematic05")
			end
			if g >= 69 then
				y = OFF
				RuleConsole("g_postEffect cinematic03")
			end
			if g >= 71 then
				y = ON
				RuleConsole("g_postEffect cinematic05")
			end
			if g >= 80 then
				y = OFF
				RuleConsole("g_postEffect cinematic04")
			end
			if g >= 83 then
				y = ON
				RuleConsole("g_postEffect cinematic05")
			end
			if g >= 90 then
				y = OFF
				RuleConsole("g_postEffect cinematic02")
			end
			if g >= 93 then
				y = ON
				RuleConsole("g_postEffect cinematic05")
			end

			if y ~= ON then 
				CreateEffectTTLed("ET_PS_UFO01", CVector(camPos), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 1000)
			end
			if g >= 98 then  RuleConsole("g_postEffect cinematicEnd") end

			if 20 >= g then
				getObj("AliensShip"):SetPosition( CVector(1366.725, 0, 1801.638))
			end
			if g >= 21 then
			getObj("AliensShip"):SetPosition( CVector(1366.725, y, 1801.638)) 
			end
			if g >= 40 then
				getObj("AliensShip"):SetPosition( CVector(1366.725, 490.804, 1801.638))
			end

			SetVar("R", r)
		</script>
	</trigger>

<!-- Тарелку под землю -->
	<trigger Name="trAliensShipAnderEarth" active="1">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			local y = 0

			getObj("AliensShip"):SetPosition( CVector(1366.725, y, 1801.638)) 

			trigger:Deactivate()
		</script>
	</trigger>

<!-- эфекты на електростанции -->
	<trigger Name="trLightOn" active="1">
		<event timeout="0.1" eventid="GE_TIME_PERIOD" />
		<script>
			local y = 276.525

			CreateNewSgNodeObject("ET_PS_LENS_D5", "p003", -1, -1, CVector(6242.927, 5.403 + y, 4402.030), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_LENS_D5", "p004", -1, -1, CVector(6021.822, 23.762 + y, 4376.930), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_LENS_D5", "p005", -1, -1, CVector(6019.808, 23.762 + y, 4372.996), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_LENS_D5", "p006", -1, -1, CVector(6204.051, 5.403 + y, 4428.498), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_LENS_D5", "p007", -1, -1, CVector(6211.564, 5.403 + y, 4356.677), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_LENS_D5", "p008", -1, -1, CVector(6173.076, 5.403 + y, 4383.687), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_BOSS2_MAIN", "p009", -1, -1, CVector(5985.193, 0.000 + y, 4396.228), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_SPARKLE_BIG_MAIN2", "p010", -1, -1, CVector(6267.566, 15.772 + y, 4388.441), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_SPARKLE_BIG_MAIN2", "p011", -1, -1, CVector(6225.648, 15.772 + y, 4410.056), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_SPARKLE_BIG_MAIN", "p012", -1, -1, CVector(6248.037, 19.651 + y, 4398.562), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_SPARKLE_BIG_MAIN1", "p013", -1, -1, CVector(6258.379, 10.854 + y, 4391.873), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_SPARKLE_BIG_MAIN1", "p014", -1, -1, CVector(6242.969, 5.759 + y, 4402.217), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_SPARKLE_BIG_MAIN2", "p015", -1, -1, CVector(6226.852, 10.621 + y, 4346.274), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_SPARKLE_BIG_MAIN2", "p016", -1, -1, CVector(6216.646, 10.578 + y, 4418.399), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_SPARKLE_BIG_MAIN1", "p017", -1, -1, CVector(6217.976, 3.830 + y, 4428.468), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_SPARKLE_BIG_MAIN1", "p018", -1, -1, CVector(6255.394, 3.830 + y, 4402.350), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_SPARKLE_BIG_MAIN1", "p019", -1, -1, CVector(6256.351, 10.630 + y, 4393.144), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_SPARKLE_BIG_MAIN", "p020", -1, -1, CVector(6258.739, 11.093 + y, 4392.267), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_ORACUL_MAIN3", "p021", -1, -1, CVector(6243.535, -15.534 + y, 4399.495), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_ORACUL_MAIN3", "p022", -1, -1, CVector(6213.134, -15.534 + y, 4356.146), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_ORACUL_MAIN3", "p023", -1, -1, CVector(5957.748, 25.884 + y, 4322.351), Quaternion(0.7290, -0.5787, -0.1097, 0.3487))
			CreateNewSgNodeObject("ET_PS_SPARKLE_BIG_MAIN2", "p0024", -1, -1, CVector(5987.222, 65.488 + y, 4390.725), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_SPARKLE_BIG_MAIN2", "p025", -1, -1, CVector(5993.972, 45.907 + y, 4408.061), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_SPARKLE_BIG_MAIN2", "p026", -1, -1, CVector(5947.930, 17.626 + y, 4332.236), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_SPARKLE_BIG_MAIN2", "p027", -1, -1, CVector(5932.408, 32.007 + y, 4343.449), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_LENS_D1", "p028", -1, -1, CVector(5961.414, 49.632 + y, 4369.348), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_LENS_D5", "p029", -1, -1, CVector(5986.168, 46.619 + y, 4396.456), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_LENS_D4", "p030", -1, -1, CVector(6018.188, 35.593 + y, 4395.552), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_LENS_D4", "p031", -1, -1, CVector(6020.208, 35.593 + y, 4398.536), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_LENS_D4", "p032", -1, -1, CVector(6022.368, 35.593 + y, 4402.399), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_LENS_D4", "p033", -1, -1, CVector(6024.400, 35.593 + y, 4405.390), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_LENS_S9", "p034", -1, -1, CVector(6000.544, 36.210 + y, 4386.690), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_LENS_D1", "p035", -1, -1, CVector(6017.873, 77.968 + y, 4402.290), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_LENS_D1", "p036", -1, -1, CVector(6017.177, 77.968 + y, 4405.025), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_LENS_D1", "p037", -1, -1, CVector(6015.383, 77.968 + y, 4402.774), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_LENS_D1", "p038", -1, -1, CVector(6013.823, 77.968 + y, 4404.696), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_LENS_D4", "p039", -1, -1, CVector(5957.439, 65.895 + y, 4392.166), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trLightRemove" active="0">
		<event timeout="2.5" eventid="GE_TIME_PERIOD" />
		<script>

			for light = 3,9 do
				local p = getObj("p00"..light)
				if p then p:Remove() end
			end

			for light = 10, 39 do
				local p = getObj("p0"..light)
				if p then p:Remove() end
			end

			trigger:Deactivate()
		</script>
	</trigger>

<!-- 	поочередно выключающиися эфекты		 -->
	<trigger Name="trLightOff" active="0">
		<event timeout="2.6" eventid="GE_TIME_PERIOD" />
		<script>
			local y = 276.525

			CreateEffectTTLed("ET_PS_LENS_D5", CVector(6242.927, 5.403 + y, 4402.030), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 4900)
			CreateEffectTTLed("ET_PS_LENS_D5", CVector(6021.822, 23.762 + y, 4376.930), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 4700)
			CreateEffectTTLed("ET_PS_LENS_D5", CVector(6019.808, 23.762 + y, 4372.996), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 4600)
			CreateEffectTTLed("ET_PS_LENS_D5", CVector(6204.051, 5.403 + y, 4428.498), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 4500)
			CreateEffectTTLed("ET_PS_LENS_D5", CVector(6211.564, 5.403 + y, 4356.677), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 4400)
			CreateEffectTTLed("ET_PS_LENS_D5", CVector(6173.076, 5.403 + y, 4383.687), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 4300)
			CreateEffectTTLed("ET_PS_BOSS2_MAIN", CVector(5985.193, 0.000 + y, 4396.228), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 4200)
			CreateEffectTTLed("ET_PS_SPARKLE_BIG_MAIN2", CVector(6267.566, 15.772 + y, 4388.441), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 4200)
			CreateEffectTTLed("ET_PS_SPARKLE_BIG_MAIN2", CVector(6225.648, 15.772 + y, 4410.056), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 4000)
			CreateEffectTTLed("ET_PS_SPARKLE_BIG_MAIN", CVector(6248.037, 19.651 + y, 4398.562), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 4000)
			CreateEffectTTLed("ET_PS_SPARKLE_BIG_MAIN1", CVector(6258.379, 10.854 + y, 4391.873), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 3700)
			CreateEffectTTLed("ET_PS_SPARKLE_BIG_MAIN1", CVector(6242.969, 5.759 + y, 4402.217), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 3500)
			CreateEffectTTLed("ET_PS_SPARKLE_BIG_MAIN2", CVector(6226.852, 10.621 + y, 4346.274), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 3300)
			CreateEffectTTLed("ET_PS_SPARKLE_BIG_MAIN2", CVector(6216.646, 10.578 + y, 4418.399), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 3100)
			CreateEffectTTLed("ET_PS_SPARKLE_BIG_MAIN1", CVector(6217.976, 3.830 + y, 4428.468), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 3000)
			CreateEffectTTLed("ET_PS_SPARKLE_BIG_MAIN1", CVector(6255.394, 3.830 + y, 4402.350), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 2800)
			CreateEffectTTLed("ET_PS_SPARKLE_BIG_MAIN1", CVector(6256.351, 10.630 + y, 4393.144), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 2600)
			CreateEffectTTLed("ET_PS_SPARKLE_BIG_MAIN", CVector(6258.739, 11.093 + y, 4392.267), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 2400)
			CreateEffectTTLed("ET_PS_ORACUL_MAIN3", CVector(6243.535, -15.534 + y, 4399.495), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 2200)
			CreateEffectTTLed("ET_PS_ORACUL_MAIN3", CVector(6213.134, -15.534 + y, 4356.146), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 2000)
			CreateEffectTTLed("ET_PS_ORACUL_MAIN3", CVector(5957.748, 25.884 + y, 4322.351), Quaternion(0.7290, -0.5787, -0.1097, 0.3487), 1800)
			CreateEffectTTLed("ET_PS_SPARKLE_BIG_MAIN2", CVector(5987.222, 65.488 + y, 4390.725), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 1700)
			CreateEffectTTLed("ET_PS_SPARKLE_BIG_MAIN2", CVector(5993.972, 45.907 + y, 4408.061), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 1700)
			CreateEffectTTLed("ET_PS_SPARKLE_BIG_MAIN2", CVector(5947.930, 17.626 + y, 4332.236), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 1700)
			CreateEffectTTLed("ET_PS_SPARKLE_BIG_MAIN2", CVector(5932.408, 32.007 + y, 4343.449), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 1700)
			CreateEffectTTLed("ET_PS_LENS_D1", CVector(5961.414, 49.632 + y, 4369.348), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 1600)
			CreateEffectTTLed("ET_PS_LENS_D5", CVector(5986.168, 46.619 + y, 4396.456), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 1400)
			CreateEffectTTLed("ET_PS_LENS_D4", CVector(6018.188, 35.593 + y, 4395.552), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 1200)
			CreateEffectTTLed("ET_PS_LENS_D4", CVector(6020.208, 35.593 + y, 4398.536), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 1000)
			CreateEffectTTLed("ET_PS_LENS_D4", CVector(6022.368, 35.593 + y, 4402.399), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 800)
			CreateEffectTTLed("ET_PS_LENS_D4", CVector(6024.400, 35.593 + y, 4405.390), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 600)
			CreateEffectTTLed("ET_PS_LENS_S9", CVector(6000.544, 36.210 + y, 4386.690), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 500)
			CreateEffectTTLed("ET_PS_LENS_D1", CVector(6017.873, 77.968 + y, 4402.290), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 400)
			CreateEffectTTLed("ET_PS_LENS_D1", CVector(6017.177, 77.968 + y, 4405.025), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 300)
			CreateEffectTTLed("ET_PS_LENS_D1", CVector(6015.383, 77.968 + y, 4402.774), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 200)
			CreateEffectTTLed("ET_PS_LENS_D1", CVector(6013.823, 77.968 + y, 4404.696), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 100)
			CreateEffectTTLed("ET_PS_LENS_D4", CVector(5957.439, 65.895 + y, 4392.166), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 50)

			trigger:Deactivate()
		</script>
	</trigger>

	<!-- Выбор финала в зависимости от действий игрока -->
	<trigger Name="VyborFinala" active="0">
		<event	timeout="0.01"		eventid="GE_TIME_PERIOD" />
		<script>
			local ending = DefineTheEnding()
			
			if ending==1 then
				TakeQuest("BenGoodEnd")
			elseif ending==0 then
				TakeQuest("BenNormalEnd")
			else
				println("CRITICAL! CAN NOT DEFINE THE ENDING!")
				LOG("CRITICAL! CAN NOT DEFINE THE ENDING!")
			end

			trigger:Deactivate()
		</script>
	</trigger>

	<!-- Телепорт в Риджин после катсцены с боссом. -->
	<trigger Name="ToR2M1AfterBoss" active="0">
		<event        timeout="0.01"        eventid="GE_TIME_PERIOD" />
		<script>
			local b = SpawnMessageBox("8808")
			if b == 1 then
				PassToMap("r1m2", "FromR1M3", -1, true)
			end

			trigger:Deactivate()
		</script>
	</trigger>

	<!-- Квест Эстета Кауфмана. Создание Жулика. -->
	<trigger Name="Trigger_Antipod" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			TeamCreate("GulikCar",1005,CVector(6195, 269, 3917),{"Belaz01"}, nil, 1)

			local FVehicle = GetEntityByName("GulikCar")
			if FVehicle then
				FVehicle:StackOpen()
				FVehicle:SetDestination( CVector(6438, 270, 3873))
				FVehicle:SetDestination( CVector(6308, 269, 3790))
				FVehicle:SetDestination( CVector(6195, 269, 3917))
				FVehicle:StackLoop()
				FVehicle:StackClose()
			end

			TActivate("Trigger_Antipod_Die")

			CompleteQuest("r2m1_ArtAntipod_Quest")

			trigger:Deactivate()
		</script>
	</trigger>

	<!-- Квесты Жулика Инкса -->
	<trigger Name="Trigger_NarcotikCaravan" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			TeamCreate("CaravanWithNarcotikCars",1002,CVector(7371,308,5195),{"Cruiser02","DemoShot1","r1m3_molokovoz03"}, nil, 1)

			local FVehicle = GetEntityByName("CaravanWithNarcotikCars")
			if FVehicle then
				FVehicle:StackOpen()
				FVehicle:SetDestination( CVector(6864, 290, 5353))
				FVehicle:SetDestination( CVector(6740, 289, 5578))
				FVehicle:SetDestination( CVector(5831, 297, 5517))
				FVehicle:SetDestination( CVector(5136, 235, 5618))
				FVehicle:SetDestination( CVector(4688, 235, 5960))
				FVehicle:StackClose()
			end

			TActivate("Trigger_NarcotikCaravan_Die")

			TakeQuest("r2m1_KillNarcoticsCaravan_Quest")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="Trigger_NarcotikCaravan_Die" active="0">
		<event eventid="GE_OBJECT_DIE" ObjName="CaravanWithNarcotikCars" />
		<script>
			CompleteQuest( "r2m1_KillNarcoticsCaravan_Quest" )

			AddQuestItem("quest_mafia_narcotik")
			
			AddFadingMsgByStrIdFormatted( "fm_player_add_thing", "quest_mafia_narcotik")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="Trigger_NarcotikBoss" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			TeamCreate("BossNarcotikCar",1002,CVector(3838.786, 227.205, 6982.742),{"CoolBelaz_2"}, nil, 1)

			TActivate("Trigger_NarcotikBoss_Die")

			TakeQuest("r2m1_KillGodFather_Quest")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="Trigger_NarcotikBoss_Die" active="0">
		<event eventid="GE_OBJECT_DIE" ObjName="BossNarcotikCar" />
		<script>
			CompleteQuest( "r2m1_KillGodFather_Quest" )

			trigger:Deactivate()
		</script>
	</trigger>

	<!-- Переход в Аржан -->
	<trigger Name="triggerExitToMap22" active="1">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="ToR2M2" />
		<script>
			local Plf = GetPlayerVehicle()
			Plf:SetThrottle( 0 )
			Plf:SetCustomLinearVelocity( 0 )

			local PlfID = GetPlayerVehicleId()
			local PlfCoor = Plf:GetPosition()
			PlfCoor.x = PlfCoor.x - 10
			PlfCoor.y = PlfCoor.y + 5
			PlfCoor.z = PlfCoor.z - 15

			if IsQuestComplete("FigureOutWhatsGoingOn_Quest") and QuestStatus("d_CaravanFromTuzzToVillage_Quest")~=Q_TAKEN then 
				ValidateGameVersion()

				local b = SpawnMessageBox( "8801" )
				if b == 1 then
					PassToMap("r2m2", "FromR2M1", -1 )
				else
					SaveAllToleranceStatus(RS_NEUTRAL)

					FlyAround(0.1, 0, 25, 3, PlfCoor, PlfID, 1, 1 )
					StartCinematic()

					TActivate ("RolikExitToMap22")
					TActivate ("RolikENDExitToMap22")
				end
			else
				SaveAllToleranceStatus(RS_NEUTRAL)

				FlyAround(0.5, 0, 35, 7, PlfCoor, PlfID, 1, 1 )
				StartCinematic()

				AddCinematicMessage( 8802, 0.5 )

				TActivate ("RolikExitToMap22")
				TActivate ("RolikENDExitToMap22")
			end
 		</script>
	</trigger>
	<trigger Name="RolikExitToMap22" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			
			local Plf = GetPlayerVehicle()
			Plf:SetThrottle( 0 )
			Plf:SetCustomLinearVelocity( 0 )

			trigger:Deactivate()
		</script>
	</trigger>
	<trigger Name="RolikENDExitToMap22" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			RestoreAllToleranceStatus()

			GetPlayerVehicle():SetGamePositionOnGround(CVector(getPos("FromR2M2")))
			RotationPlayerByPoints(CVector(getPos("ToR2M2")), CVector(getPos("FromR2M2")))

			TDeactivate( "RolikExitToMap22" )

			SetCameraBehindPlayerVehicle()

			trigger:Deactivate()
		</script>
	</trigger>

	<!-- Секретный переход в Аржан -->
	<trigger Name="triggerExitToMap22small" active="1">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="ToR2M2small" />
		<script>
			local Plf = GetPlayerVehicle()
			Plf:SetThrottle( 0 )
			Plf:SetCustomLinearVelocity( 0 )

			local PlfID = GetPlayerVehicleId()
			local PlfCoor = Plf:GetPosition()
			PlfCoor.x = PlfCoor.x - 15
			PlfCoor.y = PlfCoor.y + 5
			PlfCoor.z = PlfCoor.z - 10

			if IsQuestTaken("d_GetAkselBandit_Quest") then 
				ValidateGameVersion()

				local b = SpawnMessageBox( "8801" )
				if b == 1 then
					PassToMap("r2m2", "FromR2M1small", -1 )
				else
					SaveAllToleranceStatus(RS_NEUTRAL)

					FlyAround(0.1, 0, 25, 3, PlfCoor, PlfID, 1, 1 )
					StartCinematic()

					TActivate ("RolikExitToMap22small")
					TActivate ("RolikENDExitToMap22small")
				end
			else
				SaveAllToleranceStatus(RS_NEUTRAL)

				FlyAround(0.5, 0, 25, 9, PlfCoor, PlfID, 1, 1 )
				StartCinematic()

				AddCinematicMessage( 8803, 0.5 )

				TActivate ("RolikExitToMap22small")
				TActivate ("RolikENDExitToMap22small")
			end
 		</script>
	</trigger>
	<trigger Name="RolikExitToMap22small" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			
			local Plf = GetPlayerVehicle()
			Plf:SetThrottle( 0 )
			Plf:SetCustomLinearVelocity( 0 )

			trigger:Deactivate()    
		</script>
	</trigger>
	<trigger Name="RolikENDExitToMap22small" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			RestoreAllToleranceStatus()

			GetPlayerVehicle():SetGamePositionOnGround(CVector(getPos("FromR2M2small")))
			RotationPlayerByPoints(CVector(getPos("ToR2M2small")), CVector(getPos("FromR2M2small")))

			TDeactivate( "RolikExitToMap22small" )

			SetCameraBehindPlayerVehicle()

			trigger:Deactivate()
		</script>
	</trigger>

	<!-- Переход в Фатерлянд -->
	<trigger Name="triggerExitToMap13" active="1">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="ToR1M3" />
		<script>
			local Plf = GetPlayerVehicle()
			Plf:SetThrottle( 0 )
			Plf:SetCustomLinearVelocity( 0 )

			local PlfID = GetPlayerVehicleId()
			local PlfCoor = Plf:GetPosition()
			PlfCoor.x = PlfCoor.x - 25
			PlfCoor.y = PlfCoor.y + 5
			PlfCoor.z = PlfCoor.z - 20

			ValidateGameVersion()

			local b = SpawnMessageBox( "8801" )
			if b == 1 then
				PassToMap("r1m3", "FromR2M1", -1 )
			else
				SaveAllToleranceStatus(RS_NEUTRAL)

				FlyAround(0.1, 0, -45, 3, PlfCoor, PlfID, 1, 1 )
				StartCinematic()

				TActivate ("RolikExitToMap13")
				TActivate ("RolikENDExitToMap13")
			end
 		</script>
	</trigger>
	<trigger Name="RolikExitToMap13" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			
			local Plf = GetPlayerVehicle()
			Plf:SetThrottle( 0 )
			Plf:SetCustomLinearVelocity( 0 )

			trigger:Deactivate()    
		</script>
	</trigger>
	<trigger Name="RolikENDExitToMap13" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			RestoreAllToleranceStatus()

			GetPlayerVehicle():SetGamePositionOnGround(CVector(getPos("FromR1M3")))
			RotationPlayerByPoints(CVector(getPos("ToR1M3")), CVector(getPos("FromR1M3")))

			TDeactivate( "RolikExitToMap13" )

			SetCameraBehindPlayerVehicle()

			trigger:Deactivate()
		</script>
	</trigger>

	<!-- Переход в Рощу Друидов -->
	<trigger Name="triggerExitToMap31" active="1">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="ToR3M1" />
		<script>
			local Plf = GetPlayerVehicle()
			Plf:SetThrottle( 0 )
			Plf:SetCustomLinearVelocity( 0 )

			local PlfID = GetPlayerVehicleId()
			local PlfCoor = Plf:GetPosition()
			PlfCoor.x = PlfCoor.x - 5
			PlfCoor.y = PlfCoor.y + 5
			PlfCoor.z = PlfCoor.z - 25

			ValidateGameVersion()

			local b = SpawnMessageBox( "8801" )
			if b == 1 then
				PassToMap("r3m1", "FromR2M1", -50 )
			else
				SaveAllToleranceStatus(RS_NEUTRAL)

				FlyAround(0.1, 0, -45, 3, PlfCoor, PlfID, 1, 1 )
				StartCinematic()

				TActivate ("RolikExitToMap31")
				TActivate ("RolikENDExitToMap31")
			end
 		</script>
	</trigger>
	<trigger Name="RolikExitToMap31" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			
			local Plf = GetPlayerVehicle()
			Plf:SetThrottle( 0 )
			Plf:SetCustomLinearVelocity( 0 )

			trigger:Deactivate()    
		</script>
	</trigger>
	<trigger Name="RolikENDExitToMap31" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			RestoreAllToleranceStatus()

			GetPlayerVehicle():SetGamePositionOnGround(CVector(getPos("FromR3M1")))
			RotationPlayerByPoints(CVector(getPos("ToR3M1")), CVector(getPos("FromR3M1")))

			TDeactivate( "RolikExitToMap31" )

			SetCameraBehindPlayerVehicle()

			trigger:Deactivate()
		</script>
	</trigger>
</triggers>