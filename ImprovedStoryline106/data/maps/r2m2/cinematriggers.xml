<?xml version="1.0" encoding="windows-1251" standalone="yes" ?>
<triggers>

<!-- АНТИМИЛЛИТАРИСТЫ и СНГ -->
	<!-- Выгнали из Марецции -->
	<trigger Name="Podderzhka_cin" active="0">
		<event	timeout="0"		eventid="GE_TIME_PERIOD" />
		<script>

			SaveAllToleranceStatus(RS_NEUTRAL)

			local Plf = GetPlayerVehicle()
			local PlfID = GetPlayerVehicleId()
			local PlfCoor = Plf:GetPosition()
			PlfCoor.x = PlfCoor.x - 15
			PlfCoor.y = PlfCoor.y + 5
			PlfCoor.z = PlfCoor.z + 15
			
			FlyAround(1.5, 0, 35, 24, PlfCoor, PlfID, 0, 1)
			StartCinematic()
			
			AddCinematicMessage( 64, 0.25 )
			AddCinematicMessage( 65, 0.25 )
			AddCinematicMessage( 66, 0.25 )

			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetCustomControlEnabled( true )
				vehPlayer:SetCustomLinearVelocity( 0 )
				vehPlayer:SetThrottle( 0 )
				vehPlayer:SetCustomControlEnabled( false )
				vehPlayer:SetGamePositionOnGround( CVector(1722.219, 319.111, 3285.243))
				vehPlayer:SetRotation(Quaternion(0.002, -0.746, 0.004, 0.666))
			end

			TActivate("Podderzhka_cin_end")
			
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="Podderzhka_cin_end" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			RestoreAllToleranceStatus()

			SetCameraBehindPlayerVehicle()

			SetVar("MarezziaCutscene", 0)

			trigger:Deactivate()
		</script>
	</trigger>

	<!-- Тупиковая концовка, если сдаём повстанца АР -->
	<!-- Встреча с палачом -->
	<trigger Name="Ending5_begin" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="Ending5_loc" />
		<script>
			SaveAllToleranceStatus(RS_NEUTRAL)

			PlayCustomMusic("IntenseDialogue04")

			local vehPal = CreateVehicleEx("CoolBelaz", "PalachVehicle", CVector(771.934, 263.516, 3295.528), 1015)

			local vehPalID = vehPal:GetId()

			Fly("Kontsovka5", CINEMATIC_AIM_TO_ID, GetPlayerVehicleId(), 14, 1, 0 )
			Fly("Kontsovka51", CINEMATIC_AIM_TO_ID, GetPlayerVehicleId(), 40, 0, 0 )
			FlyLinked("Kontsovka52", vehPalID, 17, 0, 1, vehPalID)
			StartCinematic()

			AddCinematicMessage( 52, 9 )

			TActivate("Ending5_FadeIn")
			TActivate("Ending5_cam1")
			TActivate("Ending5_cam2")
			TActivate("Ending5_End")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="Ending5_FadeIn" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetGamePositionOnGround( CVector(892.959, 263.152, 3159.999))
				vehPlayer:SetRotation(Quaternion(-0.014, 0.392, 0.026, -0.919))
				vehPlayer:SetCustomLinearVelocity( 10 )
				vehPlayer:SetExternalPathByName("koncovka55")
			end

			local vehPal = GetEntityByName("PalachVehicle")
			if vehPal then
				vehPal:SetRotation(Quaternion(0.007, 0.991, 0.001, 0.133))
				vehPal:SetRandomSkin()
			end
			
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="Ending5_cam1" active="0">
		<event flypath="Kontsovka51" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
		
			AddCinematicMessage( 53, 1 )
			AddCinematicMessage( 54, 1 )

			if IsQuestComplete("Podderzhka_Quest") then
				AddCinematicMessage( 71, 1 )
			else
				AddCinematicMessage( 55, 1 )
			end

			AddCinematicMessage( 56, 1 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="Ending5_cam2" active="0">
		<event flypath="Kontsovka52" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
		
			if IsQuestComplete("Podderzhka_Quest") then
				AddCinematicMessage( 72, 1 )
			else
				AddCinematicMessage( 57, 1 )
			end

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="Ending5_End" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>

			RestoreAllToleranceStatus()

			SetCameraBehindPlayerVehicle()

			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:PlaceToEndOfPath()
				vehPlayer:setGodMode(1)
			end

			local vehPal = GetEntityByName("PalachVehicle")
			if vehPal then
				skin = vehPal:GetSkin()
				vehPal:Remove()
			end

			local vehPalach = TeamCreate("Palach",1015,CVector(783.123, 263.580, 3303.772),{"CoolBelaz"}, nil, nil, Quaternion(-0.000, 1.000, -0.005, -0.001))
			if vehPalach then vehPalach:GetVehicle(0):SetSkin(skin) end

			skin = nil

			PlayCustomMusic("Passage03a")
			
			SetTolerance(1100, 1015, RS_ENEMY)
			SetTolerance(1100, 1043, RS_ENEMY)
			
			TActivate("KvestNaEnding5")
			
			CompleteQuest("Kontsovka5_Quest")

			TDeactivate("Ending5_FadeIn")
			TDeactivate("Ending5_cam1")
			TDeactivate("Ending5_cam2")
			TActivate("PlayerGMDisable")
						
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="PlayerGMDisable" active="0">
		<event	timeout="2"		eventid="GE_TIME_PERIOD" />
		<script>

			DisableGodMode()
			
			trigger:Deactivate()
		</script>
	</trigger>

	<!-- Убили палача АР. -->
	<trigger Name="PalachIsDead" active="0">
		<event	timeout="0.1" eventid="GE_TIME_PERIOD" />
		<script>
			
			SaveAllToleranceStatus(RS_NEUTRAL)
			
			local Plf = GetPlayerVehicle()
			local PlfID = GetPlayerVehicleId()
			local PlfCoor = Plf:GetPosition()
			PlfCoor.y = PlfCoor.y + 5
			PlfCoor.z = PlfCoor.z + 15

			Plf:SetCustomLinearVelocity(0)
			Plf:SetThrottle(0)

			FlyAround(1, 0, 25, 9, PlfCoor, PlfID, 1, 1 )
			StartCinematic()

			AddCinematicMessage( 58, 1 )

			TActivate("PalachIsDead2")
			
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="PalachIsDead2" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			
			RestoreAllToleranceStatus()
			
			StopPlayingCustomMusic()
			
			TActivate("EndingRolik5")
			TDeactivate("triggerExitToMap21")

			trigger:Deactivate()
		</script>
	</trigger>

	<!-- Бежим в Либриум -->
	<trigger Name="EndingRolik5" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="ToR2M1" />
		<script>
			
			SaveAllToleranceStatus(RS_NEUTRAL)
			
			PlayCustomMusic("IntenseDialogue03")
			
			Fly("Ending5", CINEMATIC_NO_AIM, 0, 17, 1, 1 )
			StartCinematic()

			if IsQuestComplete("Podderzhka_Quest") then
				AddCinematicMessage( 8804, 1 )
			else
				AddCinematicMessage( 8805, 1 )
			end

			TActivate("EndingRolik5Fade")
			TActivate("EndingRolik5End")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="EndingRolik5Fade" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			SetWeather(0)

			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetCustomControlEnabled( true )
				vehPlayer:SetCustomLinearVelocity( 0 )
				vehPlayer:SetThrottle( 0 )
				vehPlayer:SetCustomControlEnabled( false )
				vehPlayer:SetGamePositionOnGround( CVector(1674.653, 318.061, 3231.908))
				vehPlayer:SetRotation(Quaternion(-0.003, -0.946, -0.000, -0.325))
			end
			
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="EndingRolik5End" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			
			StopPlayingCustomMusic()
			
			CompleteQuest("EscapeArzhan")

			SpawnMessageBox("8809")

			ShowDeathMenu()

			TDeactivate("EndingRolik5Fade")

			CheckPlayerVehicle()

			trigger:Deactivate()
		</script>
	</trigger>

	<!-- Подъехали к убежищу Еретика -->
	<trigger Name="trEretikPreSave" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="EretikPreSave_loc" />
		<script>
			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetCustomControlEnabled( true )
				vehPlayer:SetCustomLinearVelocity( 0 )
				vehPlayer:SetThrottle( 0 )
				vehPlayer:SetCustomControlEnabled( false )
			end

			local Plf = GetPlayerVehicle()
			local PlfID = GetPlayerVehicleId()
			local PlfCoor = Plf:GetPosition()
			PlfCoor.x = PlfCoor.x + 15
			PlfCoor.y = PlfCoor.y + 5
			PlfCoor.z = PlfCoor.z + 10

			SaveAllToleranceStatus(RS_NEUTRAL)

			FlyAround(1, 0, 25, 12, PlfCoor, PlfID, 1, 1 )
			StartCinematic()

			AddCinematicMessage(8811, 1)

			TActivate("trEretikPreSaveEnd")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trEretikPreSaveEnd" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			RestoreAllToleranceStatus()

			SetCameraBehindPlayerVehicle()

			SetTolerance(1100,1017,RS_ENEMY)
			
			TeamCreate("EretikCar",1083,CVector(2764.118, 261.967, 509.506),{"r1m3_hunter03"})
			
			local vehEret = GetEntityByName("EretikCar_vehicle_0")
			if vehEret then
				vehEret:setGodMode(1)
			end

			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetGamePositionOnGround(CVector(2654.297, 260.062, 726.250))
				vehPlayer:SetRotation(Quaternion(0.003, 0.966, -0.000, 0.260))
			end
			
			TeamCreate("EretikKillers",1017,CVector(2750.103, 260.280, 555.514),{"r2m1_Fighter01", "TSPFighter", "r1m2_hunter02"})
			
			TActivate("EretikKillersDIE")
			TActivate("trEretikDEAD")
			TActivate("EretikGd5sec")

			CompleteQuest("Eretik_Save")

			trigger:Deactivate()
		</script>
	</trigger>

	<!-- Спасли Еретика от церковников -->
	<trigger Name="Eretik_cin" active="0">
		<event	timeout="0.01"		eventid="GE_TIME_PERIOD" />
		<script>
			SaveAllToleranceStatus(RS_NEUTRAL)
			
			Fly("Eretik_cam", CINEMATIC_AIM_TO_POINT, CVector(2772.568, 264.030, 501.365), 36, 1, 1 )
			StartCinematic()
			
			AddCinematicMessage( 68, 0.25 )
			AddCinematicMessage( 67, 0.25 )
			AddCinematicMessage( 70, 0.25 )
			AddCinematicMessage( 69, 0.25 )
			
			TActivate("Eretikcin_Fade")
			TActivate("Eretikcin_end")
			
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="Eretikcin_Fade" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetGamePositionOnGround( CVector(2759.203, 264.140, 493.408))
				vehPlayer:SetRotation(Quaternion(0.010, 0.497, -0.002, 0.867))
				vehPlayer:SetCustomLinearVelocity( 0 )
				vehPlayer:SetThrottle( 0 )
			end
			
			local vehEret = GetEntityByName("EretikCar_vehicle_0")
			if vehEret then
				vehEret:SetGamePositionOnGround( CVector(2787.482, 263.969, 508.595))
				vehEret:SetRotation(Quaternion(0.004, -0.889, -0.009, 0.458))
			end
			trigger:Deactivate()
		</script>
	</trigger>

		<trigger Name="Eretikcin_end" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			RestoreAllToleranceStatus()

			SetCameraBehindPlayerVehicle()
			
			TActivate("EretFriend")
			
			local vehEret = GetEntityByName("EretikCar_vehicle_0")
			if vehEret then
				vehEret:Remove()
			end
			
			AddQuestItem("Heretik_P")
			AddFadingMsgByStrIdFormatted( "fm_player_add_poput", "Heretik_P")
			
			trigger:Deactivate()
		</script>
	</trigger>

	<!-- Церковники убили Еретика. Тупиковая концовка. -->
	<trigger Name="trEretikDeadTupikCin" active="0">
		<event        timeout="0.01"        eventid="GE_TIME_PERIOD" />
		<script>
			SaveAllToleranceStatus(RS_NEUTRAL)
			
			SetWeather(0)
			
			PlayCustomMusic("IntenseDialogue03")
						
			Fly("Ending5_Eretik", CINEMATIC_NO_AIM, 0, 22, 1, 1 )
			StartCinematic()

			AddCinematicMessage( 8813, 1 )

			TActivate("trEretikDeadTupikCinFade")
			TActivate("trEretikDeadTupikCinEnd")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trEretikDeadTupikCinFade" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetCustomControlEnabled( true )
				vehPlayer:SetCustomLinearVelocity( 0 )
				vehPlayer:SetThrottle( 0 )
				vehPlayer:SetCustomControlEnabled( false )
				vehPlayer:SetGamePositionOnGround(CVector(2716.689, 260.058, 638.412))
				vehPlayer:SetRotation(Quaternion(-0.003, -0.919, -0.000, -0.395))
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trEretikDeadTupikCinEnd" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			RestoreAllToleranceStatus()
			StopPlayingCustomMusic()
			SpawnMessageBox("8812")
			ShowDeathMenu()

			CheckPlayerVehicle()
			
			trigger:Deactivate()
		</script>
	</trigger>

	<!-- Церковники убили друга Еретика -->
	<trigger Name="FriendDIE_cin" active="0">
		<event	timeout="0.01"		eventid="GE_TIME_PERIOD" />
		<script>
			SaveAllToleranceStatus(RS_NEUTRAL)
			
			PlayCustomMusic("Sadness1")
			
			Fly("EretikFr_cam", CINEMATIC_NO_AIM, 0, 44, 1, 1 )
			StartCinematic()
			
			AddCinematicMessage( 59, 0.25 )
			AddCinematicMessage( 60, 0.25 )
			AddCinematicMessage( 61, 0.25 )
			AddCinematicMessage( 62, 0.25 )
			AddCinematicMessage( 63, 0.25 )
			
			TActivate("FriendDIE_fade")
			TActivate("FriendDIE_end")
			
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="FriendDIE_fade" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetGamePositionOnGround( CVector(1529.475, 294.138, 2391.964))
				vehPlayer:SetRotation(Quaternion(0.000, -0.279, -0.015, -0.960))
				vehPlayer:SetCustomLinearVelocity( 0 )
				vehPlayer:SetThrottle( 0 )
			end
			
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="FriendDIE_end" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			RestoreAllToleranceStatus()

			SetCameraBehindPlayerVehicle()
			
			StopPlayingCustomMusic()
			
			CompleteQuest("Eretik_Friend")
			
			RemoveQuestItem("Heretik_P")
			AddFadingMsgByStrIdFormatted( "fm_player_rem_poput", "Heretik_P")
			
			trigger:Deactivate()
		</script>
	</trigger>

<!-- АР -->
	<!-- Разбили колонну СНГ -->
	<trigger Name="SNGPROVIANTDIE" active="0">
		<event eventid="GE_OBJECT_DIE" ObjName="SNGProviantRiders" />
		<script>
			CompleteQuest( "r2m2_GiveBardakToEnemy" )

			SaveAllToleranceStatus(RS_NEUTRAL)

			local Plf = GetPlayerVehicle()
			local PlfID = GetPlayerVehicleId()
			local PlfCoor = Plf:GetPosition()
			PlfCoor.y = PlfCoor.y + 3
			PlfCoor.z = PlfCoor.z + 40

			Plf:SetCustomControlEnabled( true )
			Plf:SetCustomLinearVelocity( 0 )
			Plf:SetThrottle( 0 )
			Plf:SetCustomControlEnabled( false )

			FlyAround( 1, 0, 35, 21, PlfCoor, PlfID, 1, 1 )
			StartCinematic()

			AddCinematicMessage( 1, 1 )
			AddCinematicMessage( 2, 0.1 )

			TActivate( "SNGPROVIANTDIE_ce" )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SNGPROVIANTDIE_ce"	active="0">
		<event eventid="GE_SKIP_CINEMATIC"	ObjName="Player1" />
		<event eventid="GE_END_CINEMATIC"	ObjName="Player1" />
		<script>
			RestoreAllToleranceStatus()

			SetCameraBehindPlayerVehicle()

			TeamCreate("SNGInVill1",1016,CVector(1367, 261, 3709),{"r2m1_scout01","r2m2_Fighter01","r2m1_scout02"}, CVector(1233, 261, 3656), 1)

			TakeQuest("r2m2_GiveBardakToSideVillage1")

			TActivate( "INVILL1DIE" )

			trigger:Deactivate() 
		</script>
	</trigger>

	<!-- Разбили подмогу СНГ на границе -->
	<trigger	Name="INVILL2DIE" active="0">
		<event	eventid="GE_OBJECT_DIE" ObjName="SNGInVill2" />
		<script>
			CompleteQuest( "r2m2_GiveBardakToSideVillage2" )

			SaveAllToleranceStatus(RS_NEUTRAL)

			local Plf = GetPlayerVehicle()
			local PlfID = GetPlayerVehicleId()
			local PlfCoor = Plf:GetPosition()
			PlfCoor.y = PlfCoor.y + 3
			PlfCoor.z = PlfCoor.z + 70

			Plf:SetCustomControlEnabled( true )
			Plf:SetCustomLinearVelocity( 0 )
			Plf:SetThrottle( 0 )
			Plf:SetCustomControlEnabled( false )

			FlyAround( 1, 1, 25, 7, PlfCoor, PlfID, 1, 1 )
			StartCinematic()

			AddCinematicMessage( 3, 1 )

			TActivate( "INVILL2DIE_ce" )

			trigger:Deactivate()
		</script>
	</trigger>
	
	<trigger Name="INVILL2DIE_ce"	active="0">
		<event eventid="GE_SKIP_CINEMATIC"	ObjName="Player1" />
		<event eventid="GE_END_CINEMATIC"	ObjName="Player1" />
		<script>
			RestoreAllToleranceStatus()

			SetCameraBehindPlayerVehicle()

			trigger:Deactivate() 
		</script>
	</trigger>

	<!-- Игрок говорит с Феликсом на арене. Бой. -->
	<trigger Name="RolikBegin_FELIXMONAX" active="0">
		<event timeout="0.1" eventid="GE_TIME_PERIOD" />
		<script>
			PlayCustomMusic("Passage03")

			SaveAllToleranceStatus(RS_NEUTRAL)

			if QuestStatus("d_SinFather_Quest")==Q_COMPLETED then
				Fly("FELIXMONAX_cam01", CINEMATIC_NO_AIM, 0, 12.5, 1, 0 )
			else
				Fly("FELIXMONAX_cam01", CINEMATIC_NO_AIM, 0, 5, 1, 0 )
			end
			Fly("FELIXMONAX_cam02", CINEMATIC_NO_AIM, 0, 8, 0, 1 )
			StartCinematic()

			TActivate("RolikEnd_FELIXMONAX")
			TActivate("trFELIXMONAX_cam01")
			TActivate("trFELIXMONAX_cam02")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trFELIXMONAX_cam01" active="0">
 		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			CreateVehicleEx("CruiserFelix","vehFelix",CVector(3277.711, 279.558, 1310.475), 1013)

			CreateNewDummyObject( "dweller_player", "humPlayer", -1, -1, CVector(3189.766, 279.448, 1328.700), Quaternion(0.000, 0.788, 0.000, 0.616), 0)
			CreateNewDummyObject( "dweller_felix", "humFelix", -1, -1, CVector(3264.972, 279.936, 1325.833), Quaternion(0.000, -0.789, 0.000, 0.614), 0)
			local FVehicle = GetEntityByName("vehFelix")
			if FVehicle then
				FVehicle:SetSkin ( 1 )
				FVehicle:SetGamePositionOnGround( CVector(3277.711, 279.558, 1310.475))
				FVehicle:SetRotation(Quaternion(-0.105, -0.748, -0.086, 0.650))
			end

			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetCustomControlEnabled( true )
				vehPlayer:SetCustomLinearVelocity( 0 )
				vehPlayer:SetThrottle( 0 )
				vehPlayer:SetCustomControlEnabled( false )
				vehPlayer:SetGamePositionOnGround( CVector(3184.059, 281.871, 1317.925))
				vehPlayer:SetRotation(Quaternion(0.011, 0.681, -0.021, 0.732))
			end

			if QuestStatus("d_SinFather_Quest")==Q_COMPLETED then
				AddCinematicMessage( 4, 1 )
			else
				AddCinematicMessage( 8810, 1 )
			end

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trFELIXMONAX_cam02" active="0">
		<event flypath="FELIXMONAX_cam02" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			AddCinematicMessage( 5, 0.25 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="RolikEnd_FELIXMONAX" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			RestoreAllToleranceStatus()
			SetTolerance( 1100, 1013, RS_ENEMY )

			local humFelix = GetEntityByName("humFelix")
			local humPlayer= GetEntityByName("humPlayer")
			if humFelix then  humFelix:Remove() end
			if humPlayer then humPlayer:Remove() end

			local vehFelix = GetEntityByName("vehFelix")
			if vehFelix then
				vehFelix:Remove()
			end

			TDeactivate("RolikBegin_FELIXMONAX")
			TDeactivate("trFELIXMONAX_cam01")
			TDeactivate("trFELIXMONAX_cam02")

			TeamCreate("FelixCars",1013,CVector(3391, 280, 1322),{"CruiserFelix"}, CVector(3231,280,1315))
			local FVehicle = GetEntityByName("FelixCars_vehicle_0")
			if FVehicle then
				FVehicle:AddItemsToRepository("firing_rate_energy_and_add_damage_energy", 1)
				FVehicle:SetSkin ( 1 )
				SetCameraDirectionToObj(FVehicle:GetId())
			end

			CompleteQuest("r2m2_FightFelix1")

			TActivate( "FELIXMONAXDIE" )
	
			trigger:Deactivate()
		</script>
	</trigger>

	<!-- Убили Феликса на Арене -->
	<trigger Name="FELIXMONAXDIE" active="0">
		<event eventid="GE_OBJECT_DIE" ObjName="FelixCars" />
		<script>
			CompleteQuest( "r2m2_FightFelix2" )

			SaveAllToleranceStatus(RS_NEUTRAL)

			local Plf = GetPlayerVehicle()
			local PlfID = GetPlayerVehicleId()
			local PlfCoor = Plf:GetPosition()
			PlfCoor.y = PlfCoor.y + 5
			PlfCoor.z = PlfCoor.z + 50

			Plf:SetCustomControlEnabled( true )
			Plf:SetCustomLinearVelocity( 0 )
			Plf:SetThrottle( 0 )
			Plf:SetCustomControlEnabled( false )

			FlyAround( 1, 1, 40, 7, PlfCoor, PlfID, 1, 1 )
			StartCinematic()

			AddCinematicMessage( 6, 1 )

			TActivate("FELIXMONAXDIE_ce")

			StopPlayingCustomMusic()

			trigger:Deactivate()    
		</script>
	</trigger>
	
	<trigger Name="FELIXMONAXDIE_ce"	active="0">
		<event eventid="GE_SKIP_CINEMATIC"	ObjName="Player1" />
		<event eventid="GE_END_CINEMATIC"	ObjName="Player1" />
		<script>
			RestoreAllToleranceStatus()
			SetTolerance( 1100, 1013, RS_ENEMY )

			SetCameraBehindPlayerVehicle()

			trigger:Deactivate() 
		</script>
	</trigger>

	<!-- Казнили предателей АР на заправке -->
	<trigger	Name="LAGERWARBEGINDIE"	active="0">
		<event	eventid="GE_OBJECT_DIE" ObjName="LagerCarrrs" />
		<script>
			CompleteQuest( "r2m2_ToKillAllSNGPeople2" )

			SaveAllToleranceStatus(RS_NEUTRAL)

			local Plf = GetPlayerVehicle()
			local PlfID = GetPlayerVehicleId()
			local PlfCoor = Plf:GetPosition()
			PlfCoor.y = PlfCoor.y + 10
			PlfCoor.z = PlfCoor.z + 20

			Plf:SetCustomControlEnabled( true )
			Plf:SetCustomLinearVelocity( 0 )
			Plf:SetThrottle( 0 )
			Plf:SetCustomControlEnabled( false )

			FlyAround( 1, 0, 25, 31, PlfCoor, PlfID, 1, 1 )
			StartCinematic()

			AddCinematicMessage( 7, 1 )
			AddCinematicMessage( 8, 0.1 )
			AddCinematicMessage( 9, 0.25 )

			TActivate( "LAGERWARBEGINDIE_ce" )
			TActivate( "LAGERWARBEGINDIE_Fade" )

			trigger:Deactivate()   
		</script>
	</trigger>

	<trigger Name="LAGERWARBEGINDIE_Fade" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			local Plf = GetPlayerVehicle()
			if Plf then
				Plf:SetCustomControlEnabled( true )
				Plf:SetCustomLinearVelocity( 0 )
				Plf:SetThrottle( 0 )
				Plf:SetCustomControlEnabled( false )
				Plf:SetGamePositionOnGround(CVector(870.169, 250.489, 2531.117))
				Plf:SetRotation(Quaternion(0.007, 0.305, -0.001, 0.952))
			end
			
			trigger:Deactivate()
		</script>
	</trigger>
	
	<trigger Name="LAGERWARBEGINDIE_ce"	active="0">
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<script>
			RestoreAllToleranceStatus()

			SetCameraBehindPlayerVehicle()

			TDeactivate("LAGERWARBEGINDIE_Fade")

			trigger:Deactivate() 
		</script>
	</trigger>

	<!-- Убили лидеров СНГ -->
	<trigger Name="LEADERMEETDIE"	active="0">
		<event eventid="GE_OBJECT_DIE" ObjName="LeadersSNG" />
		<script>
			CompleteQuest( "r2m2_KillMrPresidentAndOther" )

			SaveAllToleranceStatus(RS_NEUTRAL)

			local Plf = GetPlayerVehicle()
			local PlfID = GetPlayerVehicleId()
			local PlfCoor = Plf:GetPosition()
			PlfCoor.y = PlfCoor.y + 5
			PlfCoor.z = PlfCoor.z + 40

			Plf:SetCustomControlEnabled( true )
			Plf:SetCustomLinearVelocity( 0 )
			Plf:SetThrottle( 0 )
			Plf:SetCustomControlEnabled( false )

			FlyAround( 1, 0.1, 40, 17, PlfCoor, PlfID, 1, 1 )
			StartCinematic()

			AddCinematicMessage( 10, 1 )

			TActivate( "LEADERMEETDIE_ce" )

			AddHistory( "r2_Before_Axel_00" )
			AddFadingMsgId( "fm_history_got" )

			trigger:Deactivate()   
		</script>
	</trigger>
	
	<trigger Name="LEADERMEETDIE_ce"	active="0">
		<event eventid="GE_SKIP_CINEMATIC"	ObjName="Player1" />
		<event eventid="GE_END_CINEMATIC"	ObjName="Player1" />
		<script>
			RestoreAllToleranceStatus()

			SetCameraBehindPlayerVehicle()

			TActivate("ZeonOpen")

			trigger:Deactivate() 
		</script>
	</trigger>

<!-- Игрок перед боем с Акселем на Арене -->
	<trigger Name="RolikBegin_AXELARENA" active="0">
		<event timeout="0.1" eventid="GE_TIME_PERIOD" />
		<script>
			PlayCustomMusic("Battle02")

			SaveAllToleranceStatus(RS_NEUTRAL)

			CreateVehicleEx("AxelVehicle","vehAxel",CVector(3392.088, 272.974, 1298.150), 1015)

			local vehAxelID = GetEntityByName("vehAxel"):GetId()
			local PlfID = GetPlayerVehicleId()

			FlyLinked( "AXELARENA_cam01", PlfID, 8, 1, 1, vehAxelID, nil, nil, nil, nil )
			StartCinematic()

			TActivate("RolikEnd_AXELARENA")
			TActivate("trAXELARENA_cam01")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trAXELARENA_cam01" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			local AVehicle = GetEntityByName("vehAxel")
			if AVehicle then
				AVehicle:SetSkin(5)
				AVehicle:SetRotation(Quaternion(-0.001, 0.996, -0.082, 0.039))
				AVehicle:SetGamePositionOnGround( CVector(3294.208, 300.150, 1300.105))
			end

			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetCustomControlEnabled( true )
				vehPlayer:SetCustomLinearVelocity( 0 )
				vehPlayer:SetThrottle( 0 )
				vehPlayer:SetGamePositionOnGround( CVector(3188.386, 281.535, 1318.528))
				vehPlayer:SetRotation(Quaternion(-0.070, -0.997, 0.003, 0.028))
				vehPlayer:SetCustomControlEnabled( false )
			end

			if IsQuestComplete("d_GetAkselBandit_Quest") then
				AddCinematicMessage( 51, 3 )
			end

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="RolikEnd_AXELARENA" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			RestoreAllToleranceStatus()
			SetTolerance( 1100, 1041, RS_ENEMY )

			local vehAxel = GetEntityByName("vehAxel")
			if vehAxel then
				vehAxel:Remove()
			end

			TeamCreate("AxelCarWar",1041,CVector(3391, 280, 1322),{"AxelVehicle"}, CVector(3231,280,1315))

			local vehAxel = GetEntityByName("AxelCarWar_vehicle_0")
			if vehAxel then
				vehAxel:HoldFire(5000)
				vehAxel:SetSkin(5)
				vehAxel:setImmortalMode(1)
				vehAxel:AddItemsToRepository("firing_rate_explosion_and_add_damage_explosion", 1)
				SetCameraDirectionToObj(vehAxel:GetId())
			end

			TActivate( "AXELARENADIE" )

			TDeactivate("RolikBegin_AXELARENA")
			TDeactivate("trAXELARENA_cam01")

			PlayCustomMusic("Passage03")

			CompleteQuest("r2m2_FightWithAxelInArena_Quest1")

			trigger:Deactivate()
		</script>
	</trigger>

<!-- Игрок побеждает Акселя. Едет искать Лису в монастыре -->
	<trigger Name="RolikBegin_AXELARENADIE2" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			PlayCustomMusic("IntenseDialogue01")

			SetTolerance( 1100, 1041, RS_NEUTRAL )
			SaveAllToleranceStatus(RS_NEUTRAL)

			if IsQuestComplete("d_GetAkselBandit_Quest") or IsQuestComplete("Eretik_Quest") then
				Fly("AXELARENADIE_cam02", CINEMATIC_NO_AIM, 0, 8, 1, 0 )
			else
				Fly("AXELARENADIE_cam02", CINEMATIC_NO_AIM, 0, 6.5, 1, 0 )
			end
			Fly("AXELARENADIE_cam03", CINEMATIC_NO_AIM, 0, 11.5, 0, 0 )
			Fly("AXELARENADIE_cam04", CINEMATIC_NO_AIM, 0, 36.1, 0, 0 )
			Fly("AXELARENADIE_cam05", CINEMATIC_NO_AIM, 0, 15.1, 0, 0 )
			Fly("AXELARENADIE_cam06", CINEMATIC_NO_AIM, 0, 13, 0, 0 )
			if IsQuestComplete("d_GetAkselBandit_Quest") or IsQuestComplete("Eretik_Quest") then
				Fly("AXELARENADIE_cam07", CINEMATIC_NO_AIM, 0, 18.6, 0, 1 )
			else
				Fly("AXELARENADIE_cam07", CINEMATIC_NO_AIM, 0, 11.5, 0, 1 )
			end
			StartCinematic()

			TActivate("trAXELARENADIE2_cam01")
			TActivate("trAXELARENADIE2_cam02")
			TActivate("trAXELARENADIE2_cam03")
			TActivate("trAXELARENADIE2_cam04")
			TActivate("trAXELARENADIE2_cam05")
			TActivate("trAXELARENADIE2_cam06")
			TActivate("trAXELARENADIE2_msg16")
			TActivate("trAXELARENADIE2_msg27")
			TActivate("trAXELARENADIE2_msg28")
			TActivate("trAXELARENADIE2_msg29")
			TActivate("RolikEnd_AXELARENADIE2")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trAXELARENADIE2_cam01" active="0">
 		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			CreateNewDummyObject( "dweller_player", "humPlayer", -1, -1, CVector(3283.407, 275.142, 1411.546), Quaternion(0.000, 0.900, 0.000, 0.600), 0)
			CreateNewDummyObject( "dweller_axel", "humAxel", -1, -1, CVector(3285.927, 274.738, 1409.657), Quaternion(0.000, -0.500, 0.000, 0.900), 0)

			local vehAxel = GetEntityByName("AxelCarWar_vehicle_0")
			if vehAxel then
				vehAxel:SetCustomControlEnabled( true )
				vehAxel:SetThrottle( 0 )
				vehAxel:SetCustomLinearVelocity( 0 )
				vehAxel:SetMaxTorque(0)
				vehAxel:SetMaxSpeed(0)
				vehAxel:SetCruisingSpeed(0)
				vehAxel:SetGamePositionOnGround( CVector(3306.556, 274.984, 1416.605))
				vehAxel:SetRotation(Quaternion(0.022, 0.951, 0.032, -0.308))
			end

			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetCustomControlEnabled( true )
				vehPlayer:SetCustomLinearVelocity( 0 )
				vehPlayer:SetThrottle( 0 )
				vehPlayer:SetGamePositionOnGround( CVector(3268.563, 276.345, 1407.063))
				vehPlayer:SetRotation(Quaternion(-0.037, 0.880, -0.034, 0.473))
				vehPlayer:SetCustomControlEnabled( false )
			end

			getObj("humPlayer"):SetNodeAction(AT_STAND1)
			getObj("humAxel"):SetNodeAction(AT_RESERVED1)
			getObj("humAxel"):SetNextForAnimation(AT_RESERVED1, AT_STAND1)

			if IsQuestComplete("d_GetAkselBandit_Quest") or IsQuestComplete("Eretik_Quest") then
				AddCinematicMessage( 25, 1 )
			else
				AddCinematicMessage( 11, 1 )
			end

			TActivate("trExplosion")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trExplosion" active="0">
		<event timeout="1" eventid="GE_TIME_PERIOD" />
		<script>
			local vehAxel = GetEntityByName("AxelCarWar_vehicle_0")
			if vehAxel then
				vehAxel:setImmortalMode(0)
			end

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trAXELARENADIE2_cam02" active="0">
		<event flypath="AXELARENADIE_cam03" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>

			getObj("humPlayer"):SetNodeAction(AT_RESERVED1)
			getObj("humAxel"):SetNodeAction(AT_STAND1)
			getObj("humPlayer"):SetNextForAnimation(AT_RESERVED1, AT_RESERVED1, AT_STAND1)
			getObj("humAxel"):SetNextForAnimation(AT_STAND1, AT_STAND1)

			AddCinematicMessage( 26, 0.25 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trAXELARENADIE2_cam03" active="0">
		<event flypath="AXELARENADIE_cam04" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			getObj("humPlayer"):SetNodeAction(AT_STAND1)
			getObj("humAxel"):SetNodeAction(AT_RESERVED1)
			getObj("humPlayer"):SetNextForAnimation(AT_STAND1, AT_STAND1)
			getObj("humAxel"):SetNextForAnimation(AT_RESERVED1, AT_STAND1, AT_STAND2, AT_STAND2)

			AddCinematicMessage( 15, 1 )
			AddCinematicMessage( 16, 0.25 )
			AddCinematicMessage( 27, 0.25 )
			AddCinematicMessage( 28, 0.25 )
			AddCinematicMessage( 29, 0.25 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trAXELARENADIE2_msg16" active="0">
		<event msgid="16" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			getObj("humPlayer"):SetNodeAction(AT_RESERVED1)
			getObj("humAxel"):SetNodeAction(AT_STAND1)
			getObj("humPlayer"):SetNextForAnimation(AT_RESERVED1, AT_RESERVED1, AT_STAND1)
			getObj("humAxel"):SetNextForAnimation(AT_STAND1, AT_STAND1)
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trAXELARENADIE2_msg27" active="0">
		<event msgid="27" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			getObj("humPlayer"):SetNodeAction(AT_STAND1)
			getObj("humAxel"):SetNodeAction(AT_STAND2)
			getObj("humPlayer"):SetNextForAnimation(AT_STAND1, AT_STAND1)
			getObj("humAxel"):SetNextForAnimation(AT_STAND2, AT_STAND1)
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trAXELARENADIE2_msg28" active="0">
		<event msgid="28" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			getObj("humPlayer"):SetNodeAction(AT_RESERVED1)
			getObj("humAxel"):SetNodeAction(AT_STAND1)
			getObj("humPlayer"):SetNextForAnimation(AT_RESERVED1, AT_STAND1)
			getObj("humAxel"):SetNextForAnimation(AT_STAND1, AT_STAND1)
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trAXELARENADIE2_msg29" active="0">
		<event msgid="29" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			getObj("humPlayer"):SetNodeAction(AT_STAND1)
			getObj("humAxel"):SetNodeAction(AT_STAND2)
			getObj("humPlayer"):SetNextForAnimation(AT_STAND1, AT_STAND1)
			getObj("humAxel"):SetNextForAnimation(AT_STAND2, AT_STAND2, AT_STAND1)
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trAXELARENADIE2_cam04" active="0">
		<event flypath="AXELARENADIE_cam05" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			getObj("humPlayer"):SetNodeAction(AT_RESERVED1)
			getObj("humAxel"):SetNodeAction(AT_STAND1)
			getObj("humPlayer"):SetNextForAnimation(AT_RESERVED1, AT_RESERVED1, AT_STAND1)
			getObj("humAxel"):SetNextForAnimation(AT_STAND1, AT_STAND1)

			AddCinematicMessage( 30, 0.25 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trAXELARENADIE2_cam05" active="0">
		<event flypath="AXELARENADIE_cam06" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			getObj("humPlayer"):SetNodeAction(AT_STAND1)
			getObj("humAxel"):SetNodeAction(AT_STAND2)
			getObj("humPlayer"):SetNextForAnimation(AT_STAND1, AT_STAND1)
			getObj("humAxel"):SetNextForAnimation(AT_STAND2, AT_STAND2, AT_STAND1)

			AddCinematicMessage( 31, 0.25 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trAXELARENADIE2_cam06" active="0">
		<event flypath="AXELARENADIE_cam07" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			getObj("humPlayer"):SetNodeAction(AT_RESERVED1)
			getObj("humAxel"):SetNodeAction(AT_STAND1)
			getObj("humPlayer"):SetNextForAnimation(AT_RESERVED1, AT_RESERVED1, AT_STAND1)
			getObj("humAxel"):SetNextForAnimation(AT_STAND1, AT_STAND1)

			AddCinematicMessage( 32, 0.25 )
			
			if IsQuestComplete("d_GetAkselBandit_Quest") or IsQuestComplete("Eretik_Quest") then
				TActivate("trAXELARENADIE2_msg33")
				AddCinematicMessage( 33, 0.25 )
			end

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trAXELARENADIE2_msg33" active="0">
		<event msgid="33" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			getObj("humPlayer"):SetNodeAction(AT_RESERVED1)
			getObj("humAxel"):SetNodeAction(AT_STAND1)
			getObj("humPlayer"):SetNextForAnimation(AT_RESERVED1, AT_RESERVED1, AT_STAND1)
			getObj("humAxel"):SetNextForAnimation(AT_STAND1, AT_STAND1)
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="RolikEnd_AXELARENADIE2" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			RestoreAllToleranceStatus()
			SetTolerance( 1100, 1015, RS_NEUTRAL )
			SetTolerance( 1100, 1016, RS_NEUTRAL )

			local humAxel = GetEntityByName("humAxel")
			local humPlayer= GetEntityByName("humPlayer")
			local AxelCar = GetEntityByName("AxelCarWar_vehicle_0")
			if humAxel then  humAxel:Remove() end
			if humPlayer then humPlayer:Remove() end
			if AxelCar then AxelCar:Remove() end

			for vehEret = 1,4 do
				local vehicle = GetEntityByName("EretCrewVeh"..vehEret)
				if vehicle then vehicle:Remove() end
			end

			TDeactivate("trAXELARENADIE2_cam01")
			TDeactivate("trAXELARENADIE2_cam02")
			TDeactivate("trAXELARENADIE2_cam03")
			TDeactivate("trAXELARENADIE2_cam04")
			TDeactivate("trAXELARENADIE2_cam05")
			TDeactivate("trAXELARENADIE2_cam06")
			TDeactivate("trAXELARENADIE2_msg16")
			TDeactivate("trAXELARENADIE2_msg27")
			TDeactivate("trAXELARENADIE2_msg28")
			TDeactivate("trAXELARENADIE2_msg29")
			TDeactivate("trAXELARENADIE2_msg33")
			TDeactivate("trExplosion")

			TActivate("ZeonOpen")
			TActivate("ChangeTownsBelongR2M2")

			StopPlayingCustomMusic()

			SetCameraBehindPlayerVehicle()

			trigger:Deactivate()
		</script>
	</trigger>

	<!-- Запрет проезда к каменному Уралу -->
	<trigger Name="StoneUralZapret" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="Shlyapa32_loc" />
		<script>
			local Plf = GetPlayerVehicle()
			Plf:SetThrottle( 0 )
			Plf:SetCustomLinearVelocity( 0 )

			local PlfID = GetPlayerVehicleId()
			local PlfCoor = Plf:GetPosition()
			PlfCoor.y = PlfCoor.y + 5
			PlfCoor.z = PlfCoor.z + 15

			SaveAllToleranceStatus(RS_NEUTRAL)

			FlyAround(0.5, 0, 25, 9, PlfCoor, PlfID, 1, 1 )
			StartCinematic()

			AddCinematicMessage( 8803, 0.5 )

			TActivate ("RolikStoneUralZapret")
			TActivate ("RolikENDStoneUralZapret")

 		</script>
	</trigger>
	
	<trigger Name="RolikStoneUralZapret" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetCustomControlEnabled( true )
				vehPlayer:SetCustomLinearVelocity( 0 )
				vehPlayer:SetThrottle( 0 )
				vehPlayer:SetCustomControlEnabled( false )
			end

			trigger:Deactivate()    
		</script>
	</trigger>

	<trigger Name="RolikENDStoneUralZapret" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			RestoreAllToleranceStatus()

			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetGamePositionOnGround( CVector(269.615, 262.940, 3611.922))
				vehPlayer:SetRotation(Quaternion(-0.023, 0.900, 0.008, -0.436))
			end

			TDeactivate( "RolikStoneUralZapret" )

			SetCameraBehindPlayerVehicle()

			trigger:Deactivate()
		</script>
	</trigger>

<!-- Игрок приезжает на поле со знаками -->
	<trigger Name="RolikBegin_ZNAKIZNAKI" active="0">
		<event timeout="0.1" eventid="GE_TIME_PERIOD" />
		<script>
			PlayCustomMusic("Bio02")

			SaveAllToleranceStatus(RS_NEUTRAL)

			Fly("ZNAKIZNAKI_cam01", CINEMATIC_NO_AIM, 0, 15, 1, 1 )
			StartCinematic()

			AddCinematicMessage( 50, 5 )

			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetCustomControlEnabled( true )
				vehPlayer:SetCustomLinearVelocity( 0 )
				vehPlayer:SetThrottle( 0 )
				vehPlayer:SetCustomControlEnabled( false )
			end

			TActivate("RolikEnd_ZNAKIZNAKI")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="RolikEnd_ZNAKIZNAKI" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			StopPlayingCustomMusic()

			RestoreAllToleranceStatus()

			SetCameraBehindPlayerVehicle()

			trigger:Deactivate()
		</script>
	</trigger>

	<!-- Мистер Шляпа. Побережье. -->
	<trigger Name="Shlyapa3cin" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="Shlyapa3_loc" />
		<script>
			
			SaveAllToleranceStatus(RS_NEUTRAL)
			
			PlayCustomMusic("Bio02")
			
			local Plf = GetPlayerVehicle()
			Plf:SetCustomLinearVelocity(0)
			Plf:SetThrottle(0)

			
			Fly("Shlyapa3", CINEMATIC_NO_AIM, 0, 11.5, 1, 1 )
			StartCinematic()
			
			AddCinematicMessage( 8807, 0.25 )
			
			TActivate("Shlyapa3cin2")
			TActivate("Shlyapa3cinend")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="Shlyapa3cinend" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			
			StopPlayingCustomMusic()
			
			RestoreAllToleranceStatus()

			SetCameraBehindPlayerVehicle()
			
			CompleteQuest("MrShlyapa3_Quest1")

			trigger:Deactivate()
		</script>
	</trigger>

	<!-- Мистер Шляпа. Каменный Урал. -->
	<trigger Name="Shlyapa3cin2" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="Shlyapa31_loc" />
		<script>
			
			SaveAllToleranceStatus(RS_NEUTRAL)
			
			PlayCustomMusic("Bio02")
			
			Fly("Shlyapa31", CINEMATIC_NO_AIM, 0, 21, 1, 1 )
			StartCinematic()
			
			AddCinematicMessage( 8808, 0.25 )
			
			TActivate("Shlyapa3cin3")
			TActivate("Shlyapa3cin4")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="Shlyapa3cin3" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>

			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetCustomControlEnabled( true )
				vehPlayer:SetCustomLinearVelocity( 0 )
				vehPlayer:SetThrottle( 0 )
				vehPlayer:SetCustomControlEnabled( false )
				vehPlayer:SetGamePositionOnGround( CVector(353.580, 323.084, 3915.506))
				vehPlayer:SetRotation(Quaternion(0.002, 0.584, -0.003, -0.812))
			end
			
			CreateNewDummyObject( "dweller_player", "hero2Dw", -1, -1, CVector(347.945, 321.000, 3905.721), Quaternion(0.001, 0.559, -0.003, -0.829), 0)
			getObj("hero2Dw"):SetNodeAction(AT_STAND2)
			getObj("hero2Dw"):SetNextForAnimation(AT_STAND2, AT_STAND1)

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="Shlyapa3cin4" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>

			local humP = GetEntityByName("hero2Dw"):Remove()
			if humP then humP:Remove() end
			
			RestoreAllToleranceStatus()
			
			StopPlayingCustomMusic()

			SetCameraBehindPlayerVehicle()
			
			CompleteQuest("MrShlyapa3_Quest2")

			trigger:Deactivate()
		</script>
	</trigger>

	<!-- Отплытие на субмарине в Вахат -->
	<trigger Name="cinMovePlToR4M1_begin" active="0">
		<event	timeout="0.01"		eventid="GE_TIME_PERIOD" />
		<script>

			GetPlayerVehicle():SetCustomLinearVelocity( 0 )
			
			SaveAllToleranceStatus(RS_NEUTRAL)
			
			EnableGodMode()
			
			Fly("lodka1", CINEMATIC_NO_AIM, 0, 21, 1, 0 )
			Fly("lodka2", CINEMATIC_NO_AIM, 0, 15, 0, 1 )
			StartCinematic()
			
			PlayCustomMusic("Bio02")
			
			TActivate("cinMovePlToR4M1_Fade")
			TActivate("cinMovePlToR4M1_cam03")
			TActivate("cinMovePlToR4M1_End")
			
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="cinMovePlToR4M1_Fade" active="0">
	<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			
			CreateNewDummyObject( "submarina",	"SubmR2M2", -1, -1, CVector(3437.163, 216.000, 2342.168), Quaternion(0.0000, -0.8704, 0.0000, 0.4924), 0 )
			
			local moverId = CreateNewObject { prototypeName	= "cinematicMover", objName  = "" }
			local mover = GetEntityByID( moverId ) 
			local controlledObj = GetEntityByName("SubmR2M2")
			if controlledObj then
				mover:SetObjAndPath( controlledObj:GetId(), "lodka4", 20 )
			end
			
			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetCustomLinearVelocity( 0 )
				vehPlayer:SetThrottle( 0 )
				vehPlayer:SetGamePositionOnGround( CVector(3025.345, 266.034, 2097.585))
		   		vehPlayer:SetRotation(Quaternion(-0.001, -0.464, 0.004, -0.886))
		   	end
		   	
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="cinMovePlToR4M1_cam03" active="0">
	<event flypath="lodka2" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			local podlodka = getObj("SubmR2M2")
			if podlodka then
				podlodka:SetNodeAction(AT_STAND2)
			end

			TActivate("subzaezd11")
			
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="subzaezd11" active="0">
	<event	timeout="7"		eventid="GE_TIME_PERIOD" />
		<script>
			
			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetExternalPathByName("subzaezd1")
				vehPlayer:LimitMaxSpeed( 20 )
		   	end
			
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="cinMovePlToR4M1_End" active="0">
	<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
	<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>

			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetExternalPathByName("subzaezd1")
				vehPlayer:PlaceToEndOfPath("subzaezd1")
				vehPlayer:SetCustomLinearVelocity( 0 )
				vehPlayer:UnlimitMaxSpeed()
		   	end

			StopPlayingCustomMusic()

			DisableGodMode()

			TDeactivate("subzaezd11")
			TDeactivate("cinMovePlToR4M1_cam03")

			TActivate("trStartMap")

			RestoreAllToleranceStatus()

			SetCameraBehindPlayerVehicle()

			if QuestStatus("r2m1_DeployBloks2")==Q_TAKEN then
				CompleteQuest("r2m1_DeployBloks2")
			end

			local hs5 = GetEntityByName("FIRE05")
			if hs5 then hs5:Remove() end
			local hs6 = GetEntityByName("FIRE06")
			if hs6 then hs6:Remove() end
			local hs7 = GetEntityByName("FIRE07")
			if hs7 then hs7:Remove() end
			
			PassToMap("r4m1", "FromR2M2", 0 , 1)

			trigger:Deactivate()
		</script>
	</trigger>
</triggers>